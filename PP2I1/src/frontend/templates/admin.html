<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../static/css/admin.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <title> Admin Page </title>
</head>

<body>

<div class="map-container flex-row">
    <div class="column map" id="map"> </div>
    <div class="column locations-container">
        <h1 class="text-center">  Localisations des poubelles </h1>
        <div class="data-container">
            {% if bins_data == [] %}
                {% block nobins %}
                <p> Aucune poubelle n'a été enregistrée.</p>
                {% endblock %}
            {% else %}
                {% block content %}
                    {% for bin in bins_data %}
                    <div class="bin-entry" data-long="{{ bin.long }}" data-lat="{{ bin.lat}}">
                        <div class="bin-entry-infos">
                            <p> Volume utilisé : {{ bin.used }} </p>
                            <p> Volume maximum : {{ bin.volume}} </p>
                            <p> Dernier vidage : {{ bin.last_emptied }}</p>
                            <p> Dernier vidage par : {{ bin.numberplate if bin.numberplate else "Jamais vidé" }} </p>
                            <p> Type de déchet :  {{ bin.waste_type}}</p>
                        </div>
                        <div class="bin-entry-name">
                            <p> {{ bin.last_name }}  {{ bin.first_name }}</p>
                        </div>
                    </div>
                    {% endfor %}
                {% endblock %}
            {% endif %}
        </div>
    </div>
</div>
<div class="grid-layout">
    <div class="div1 products-management flex-row">
        <div class="management-option selected-option" data-id="0"> 
            <p> Ajouter </p>
        </div>
        <div class="management-option" data-id="1"> 
            <p> Modifier </p>
        </div>
        <div class="management-option" data-id="2">
            <p> Supprimer </p>
        </div>
    </div>
    <div class="div2">
        <div class="form-wrapper" id="add-product">
            <h1 class="text-center"> Ajouter un produit : </h1>
            <form enctype="multipart/form-data" action="/admin/add-product/" class="flex-column" method="post">
                <div class="field-group">
                    <label for="product-name" class="label"> Nom du produit : </label>
                    <input class="input add-input" type="text" name="product-name">
                </div>
                <div class="field-group">
                    <label for="img" class="label">Sélectionnez une image : </label>
                    <input onchange="previewImage(event)" accept="image/png,image/jpeg,image/jpg" type="file" id="file" name="img">
                </div>
                <div class="field-group">
                    <label for="price" class="label"> Prix du produit : </label>
                    <input class="input add-input" type="text" name="price">
                </div>
                <div class="field-group">
                    <label class="label" for="desc"> Description du produit : </label>
                    <input class="input add-input" type="text" name="desc" />
                </div>
                <div class="field-group">
                    <label class="label" for="volume"> Volume de la poubelle : </label>
                    <input class="input add-input" type="text" name="volume" />
                </div>
                <div class="field-group">
                    <label class="label" for="stock"> Stock : </label>
                    <input class="input add-input" type="text" name="stock" />
                </div>
                <div class="field-group">
                    <input class="btn-submit transition-duration-300" type="submit" value="Ajouter le produit" />
                </div>
            </form>
        </div>
        <div class="hidden form-wrapper" id="modify-product"> 
            <h1 class="text-center"> Modifier un produit : </h1>
            <form action="/admin/modify-product/" class="flex-column" method="post">
                <div class="field-group">
                    <label for="product-name" class="label"> Nom du produit : </label>
                    <input class="input modify-input" type="text" name="product-name">
                </div>
                <div class="field-group">
                    <label for="img" class="label">Sélectionnez une image : </label>
                    <input onchange="previewImage(event)" accept="image/png,image/jpeg,image/jpg" type="file" id="file" name="img">
                </div>
                <div class="field-group">
                    <label for="price" class="label"> Prix du produit : </label>
                    <input class="input modify-input" type="text" name="price">
                </div>
                <div class="field-group">
                    <label class="label" for="desc"> Description du produit : </label>
                    <input class="input modify-input" type="text" name="desc" />
                </div>
                <div class="field-group">
                    <label class="label" for="volume"> Volume de la poubelle : </label>
                    <input class="input modify-input" type="text" name="volume" />
                </div>
                <div class="field-group">
                    <label class="label" for="stock"> Stock : </label>
                    <input class="input modify-input" type="text" name="stock" />
                </div>
                <div class="field-group">
                    <input class="btn-submit transition-duration-300" type="submit" value="Modifier le produit" />
                </div>
            </form>
        </div>
        <div class="hidden" id="remove-product">
            test2
        </div>
    </div>
    <div class="div3">
        
        <div class="preview"> 
            <div class="product-entry">
                <div class="product-entry-img">
                    <img class="product-entry-img" src="./../static/images/products/Landscape-Color.jpg" alt="product-img"/>
                </div>
                <section class="itemInfo">
                    <h2 class="itemName fields"> Poubelle Grise - 240L </h2>
                    <p class="itemDesc fields"> 
                        Une poubelle grise de 240L pour vos ordures ménagères, 
                        équipées de nombreux capteurs facilitant votre vie et celle de la commune qui vous en remercie. 
                    </p>
                </section>
                <section class="itemBuying">
                    <p class = "itemPrice fields"> 999.99€ </p>
                    <p class="fields"> En stock : 10 </p>
                    <button> Ajouter au panier </button>
                </section>
            </div>
        </div>
        <div class="select-product hidden flex-column">
            {% if products == [] %}
                <p> Aucun produit n'a été enregistré. </p>
            {% else %}
                {% block products %}
                    {% for product in products %}
                    <div class="product-entry-container">
                        <div class="product-entry" data-id="{{ product.id }}">
                            <div class="product-entry-img">
                                <img src="./../static/images/products/{{ product.img_url }}" alt="product-img"/>
                            </div>
                            <section class = "itemInfo">
                                <h2 class = "itemName"> Poubelle Grise - 240L </h2>
                                <p class = "itemDesc"> Une poubelle grise de 240L pour vos ordures ménagères, 
                                    équipées de nombreux capteurs facilitant votre vie et celle de la commune qui vous en remercie. 
                                </p>
                            </section>
                            <section class = "itemBuying">
                                <p class = "itemPrice"> 999.99€ </p>
                                <button> Ajouter au panier </button>
                            </section>
                        </div>
                        <img src="./../static/images/cross.svg" class="cancel-selection hidden"></img>
                    </div>
                    {% endfor %}
                {% endblock %}
            {% endif %}
        </div>
        <div class="hidden">
            test2
        </div>
    </div>
</div>


<script type="text/javascript" src="./../static/js/map.js"></script>
<script type="text/javascript" src="./../static/js/products_admin.js"></script>
<script>

    {% for marker in bins_data %}
        L.marker([{{ marker['lat'] }}, {{ marker['long'] }}]).addTo(map)
        .bindPopup("{{ marker['last_name'] }} {{ marker['first_name'] }} ")
    {% endfor %}




</script>

</body>
</html>