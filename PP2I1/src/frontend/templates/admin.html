<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="../static/css/admin.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
    <title> Admin Page </title>
</head>

<body>

<div class="map-container flex-row">
    <div class="column map" id="map">
        
    </div>
    <div class="column locations-container">
        <h1 class="text-center">  Localisations des poubelles </h1>
        <div class="data-container">
            {% if bins_data == [] %}
                {% block nobins %}
                <p> Aucune poubelle n'a été enregistrée.</p>
                {% endblock %}
            {% else %}
                {% block content %}
                    {% for bin in bins_data %}
                    <div class="bin-entry" data-long="{{ bin.long }}" data-lat="{{ bin.lat}}">
                        <div class="bin-entry-infos">
                            <p> Volume utilisé : {{ bin.used }} </p>
                            <p> Volume maximum : {{ bin.volume}} </p>
                            <p> Dernier vidage : {{ bin.last_emptied }}</p>
                            <p> Dernier vidage par : {{ bin.numberplate if bin.numberplate else "Jamais vidé" }} </p>
                            <p> Type de déchet :  {{ bin.waste_type}}</p>
                        </div>
                        <div class="bin-entry-name">
                            <p> {{ bin.last_name }}  {{ bin.first_name }}</p>
                        </div>
                    </div>
                    {% endfor %}
                {% endblock %}
            {% endif %}
        </div>
    </div>
</div>
<div class="products flex-column">
    <div class="current-products">
        <div class="product-entry">
            <h1> Nom Produit </h1>
            <p> Description : blablabla</p>
            <p> Prix : 10€</p>
            <p> Volume : 100L</p>
            <p> En stock : 10 </p>
        </div>
    </div>
    <div class="add-products flex-row">
      <div class="flex-column">
          <h1> Ajouter un produit </h1>
          <div class="form-wrapper">
            <form class="flex-column" method="post">
                <div class="field-group">
                    <label for="product-name" class="label"> Nom du produit : </label>
                    <input class="input" type="text" name="product-name">
                  </div>
                  <div class="field-group">
                    <label for="img-url" class="label">Sélectionnez une image : </label>
                    <input type="file" name="img-url">
                  </div>
                  <div class="field-group">
                    <label class="label" for="desc"> Description du produit : </label>
                    <input class="input" type="text" name="desc" />
                  </div>
                  <div class="field-group">
                    <label class="label" for="volume"> Volume de la poubelle : </label>
                    <input class="input" type="text" name="volume" />
                  </div>
                  <div class="field-group">
                    <label class="label" for="stock"> Stock : </label>
                    <input class="input" type="text" name="stock" />
                  </div>
                  <div class="field-group">
                    <input class="btn-submit transition-duration-300" type="submit" value="Ajouter le produit" />
                  </div>
            </form>
          </div>
      </div>
      <div class="preview flex-column"></div>
    </div>
</div>



<script type="text/javascript" src="./../static/js/map.js"></script>
<script>

    {% for marker in bins_data %}
        L.marker([{{ marker['lat'] }}, {{ marker['long'] }}]).addTo(map)
        .bindPopup("{{ marker['last_name'] }} {{ marker['first_name'] }} ")
    {% endfor %}

</script>

</body>
</html>